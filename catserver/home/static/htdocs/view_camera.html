
{%load staticfiles %}
<div class="row">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header with-border">
				<h3 class="box-title">Camera View</h3>
				<div class="box-tools pull-right">
					<button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
					<button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
				</div>
			</div><!-- /.box-header -->
			<div class="box-body no-padding">
				<div class="row">
					<img src="{% static 'data/no_image.jpg' %}" id="_camera_src" width="100%">
				</div><!-- /.row -->
				
			</div><!-- ./box-body -->
			<div class="box-footer">
				<a href="javascript:void(0);" class="btn btn-sm btn-danger btn-flat pull-left" onclick="camera_capture();"><i class="fa fa-camera"></i> Capture</a>
				<span class="pull-right">Updated : <i id="_camera_update">-</i></span>
              <!-- /.row -->
			</div><!-- /.box-footer -->
		</div><!-- /.box -->
	</div><!-- /.col -->
</div><!-- /.row -->
	
<script type="text/javascript">
function camera_capture() {
	$.ajax({
		'url':'/api/camera/capture',
		'type':'GET',
		'success':function(jsondata){
			console.log(jsondata);
			$('#_camera_update').text(jsondata.date);
			$("#_camera_src").attr("src", "{% static 'data/' %}" + jsondata.filepath);
		}
	});
}

$(document).ready(function() {

});
</script>